(function(global,factory){typeof exports=="object"&&typeof module!="undefined"?module.exports=factory():typeof define=="function"&&define.amd?define(factory):(global=typeof globalThis!="undefined"?globalThis:global||self,global.i18next=factory())})(this,function(){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol=="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _objectSpread(target){for(var source,ownKeys,i=1;i<arguments.length;i++)source=arguments[i]!=null?Object(arguments[i]):{},ownKeys=Object.keys(source),typeof Object.getOwnPropertySymbols=="function"&&(ownKeys=ownKeys.concat(Object.getOwnPropertySymbols(source).filter(function(sym){return Object.getOwnPropertyDescriptor(source,sym).enumerable}))),ownKeys.forEach(function(key){_defineProperty(target,key,source[key])});return target}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _assertThisInitialized(self){if(self===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return self}function _possibleConstructorReturn(self,call){return call&&(_typeof(call)==="object"||typeof call=="function")?call:_assertThisInitialized(self)}function _getPrototypeOf(o){return _getPrototypeOf=Object.setPrototypeOf?Object.getPrototypeOf:function(o){return o.__proto__||Object.getPrototypeOf(o)},_getPrototypeOf(o)}function _setPrototypeOf(o,p){return _setPrototypeOf=Object.setPrototypeOf||function(o,p){return o.__proto__=p,o},_setPrototypeOf(o,p)}function _inherits(subClass,superClass){if(typeof superClass!="function"&&superClass!==null)throw new TypeError("Super expression must either be null or a function");subClass.prototype=Object.create(superClass&&superClass.prototype,{constructor:{value:subClass,writable:!0,configurable:!0}});superClass&&_setPrototypeOf(subClass,superClass)}function defer(){var res,rej,promise=new Promise(function(resolve,reject){res=resolve;rej=reject});return promise.resolve=res,promise.reject=rej,promise}function makeString(object){return object==null?"":""+object}function copy(a,s,t){a.forEach(function(m){s[m]&&(t[m]=s[m])})}function getLastOfPath(object,path,Empty){function cleanKey(key){return key&&key.indexOf("###")>-1?key.replace(/###/g,"."):key}function canNotTraverseDeeper(){return!object||typeof object=="string"}for(var stack=typeof path!="string"?[].concat(path):path.split("."),key;stack.length>1;){if(canNotTraverseDeeper())return{};key=cleanKey(stack.shift());!object[key]&&Empty&&(object[key]=new Empty);object=Object.prototype.hasOwnProperty.call(object,key)?object[key]:{}}return canNotTraverseDeeper()?{}:{obj:object,k:cleanKey(stack.shift())}}function setPath(object,path,newValue){var _getLastOfPath=getLastOfPath(object,path,Object),obj=_getLastOfPath.obj,k=_getLastOfPath.k;obj[k]=newValue}function pushPath(object,path,newValue,concat){var _getLastOfPath2=getLastOfPath(object,path,Object),obj=_getLastOfPath2.obj,k=_getLastOfPath2.k;obj[k]=obj[k]||[];concat&&(obj[k]=obj[k].concat(newValue));concat||obj[k].push(newValue)}function getPath(object,path){var _getLastOfPath3=getLastOfPath(object,path),obj=_getLastOfPath3.obj,k=_getLastOfPath3.k;return obj?obj[k]:undefined}function getPathWithDefaults(data,defaultData,key){var value=getPath(data,key);return value!==undefined?value:getPath(defaultData,key)}function deepExtend(target,source,overwrite){for(var prop in source)prop!=="__proto__"&&prop!=="constructor"&&(prop in target?typeof target[prop]=="string"||target[prop]instanceof String||typeof source[prop]=="string"||source[prop]instanceof String?overwrite&&(target[prop]=source[prop]):deepExtend(target[prop],source[prop],overwrite):target[prop]=source[prop]);return target}function regexEscape(str){return str.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}function escape(data){return typeof data=="string"?data.replace(/[&<>"'\/]/g,function(s){return _entityMap[s]}):data}function capitalize(string){return string.charAt(0).toUpperCase()+string.slice(1)}function createRules(){var rules={};return sets.forEach(function(set){set.lngs.forEach(function(l){rules[l]={numbers:set.nr,plurals:_rulesPluralsTypes[set.fc]}})}),rules}function remove(arr,what){for(var found=arr.indexOf(what);found!==-1;)arr.splice(found,1),found=arr.indexOf(what)}function get(){return{debug:!1,initImmediate:!0,ns:["translation"],defaultNS:["translation"],fallbackLng:["dev"],fallbackNS:!1,whitelist:!1,nonExplicitWhitelist:!1,supportedLngs:!1,nonExplicitSupportedLngs:!1,load:"all",preload:!1,simplifyPluralSuffix:!0,keySeparator:".",nsSeparator:":",pluralSeparator:"_",contextSeparator:"_",partialBundledLanguages:!1,saveMissing:!1,updateMissing:!1,saveMissingTo:"fallback",saveMissingPlurals:!0,missingKeyHandler:!1,missingInterpolationHandler:!1,postProcess:!1,postProcessPassResolved:!1,returnNull:!0,returnEmptyString:!0,returnObjects:!1,joinArrays:!1,returnedObjectHandler:!1,parseMissingKeyHandler:!1,appendNamespaceToMissingKey:!1,appendNamespaceToCIMode:!1,overloadTranslationOptionHandler:function(args){var ret={},options;return _typeof(args[1])==="object"&&(ret=args[1]),typeof args[1]=="string"&&(ret.defaultValue=args[1]),typeof args[2]=="string"&&(ret.tDescription=args[2]),(_typeof(args[2])==="object"||_typeof(args[3])==="object")&&(options=args[3]||args[2],Object.keys(options).forEach(function(key){ret[key]=options[key]})),ret},interpolation:{escapeValue:!0,format:function(value){return value},prefix:"{{",suffix:"}}",formatSeparator:",",unescapePrefix:"-",nestingPrefix:"$t(",nestingSuffix:")",nestingOptionsSeparator:",",maxReplaces:1e3,skipOnVariables:!1}}}function transformOptions(options){return typeof options.ns=="string"&&(options.ns=[options.ns]),typeof options.fallbackLng=="string"&&(options.fallbackLng=[options.fallbackLng]),typeof options.fallbackNS=="string"&&(options.fallbackNS=[options.fallbackNS]),options.whitelist&&(options.whitelist&&options.whitelist.indexOf("cimode")<0&&(options.whitelist=options.whitelist.concat(["cimode"])),options.supportedLngs=options.whitelist),options.nonExplicitWhitelist&&(options.nonExplicitSupportedLngs=options.nonExplicitWhitelist),options.supportedLngs&&options.supportedLngs.indexOf("cimode")<0&&(options.supportedLngs=options.supportedLngs.concat(["cimode"])),options}function noop(){}var consoleLogger={type:"logger",log:function(args){this.output("log",args)},warn:function(args){this.output("warn",args)},error:function(args){this.output("error",args)},output:function(type,args){console&&console[type]&&console[type].apply(console,args)}},Logger=function(){function Logger(concreteLogger){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,Logger);this.init(concreteLogger,options)}return _createClass(Logger,[{key:"init",value:function(concreteLogger){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};this.prefix=options.prefix||"i18next:";this.logger=concreteLogger||consoleLogger;this.options=options;this.debug=options.debug}},{key:"setDebug",value:function(bool){this.debug=bool}},{key:"log",value:function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return this.forward(args,"log","",!0)}},{key:"warn",value:function(){for(var _len2=arguments.length,args=new Array(_len2),_key2=0;_key2<_len2;_key2++)args[_key2]=arguments[_key2];return this.forward(args,"warn","",!0)}},{key:"error",value:function(){for(var _len3=arguments.length,args=new Array(_len3),_key3=0;_key3<_len3;_key3++)args[_key3]=arguments[_key3];return this.forward(args,"error","")}},{key:"deprecate",value:function(){for(var _len4=arguments.length,args=new Array(_len4),_key4=0;_key4<_len4;_key4++)args[_key4]=arguments[_key4];return this.forward(args,"warn","WARNING DEPRECATED: ",!0)}},{key:"forward",value:function(args,lvl,prefix,debugOnly){return debugOnly&&!this.debug?null:(typeof args[0]=="string"&&(args[0]="".concat(prefix).concat(this.prefix," ").concat(args[0])),this.logger[lvl](args))}},{key:"create",value:function(moduleName){return new Logger(this.logger,_objectSpread({},{prefix:"".concat(this.prefix,":").concat(moduleName,":")},this.options))}}]),Logger}(),baseLogger=new Logger,EventEmitter=function(){function EventEmitter(){_classCallCheck(this,EventEmitter);this.observers={}}return _createClass(EventEmitter,[{key:"on",value:function(events,listener){var _this=this;return events.split(" ").forEach(function(event){_this.observers[event]=_this.observers[event]||[];_this.observers[event].push(listener)}),this}},{key:"off",value:function(event,listener){if(this.observers[event]){if(!listener){delete this.observers[event];return}this.observers[event]=this.observers[event].filter(function(l){return l!==listener})}}},{key:"emit",value:function(event){for(var cloned,_cloned,_len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];this.observers[event]&&(cloned=[].concat(this.observers[event]),cloned.forEach(function(observer){observer.apply(void 0,args)}));this.observers["*"]&&(_cloned=[].concat(this.observers["*"]),_cloned.forEach(function(observer){observer.apply(observer,[event].concat(args))}))}}]),EventEmitter}(),_entityMap={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"},isIE10=typeof window!="undefined"&&window.navigator&&window.navigator.userAgent&&window.navigator.userAgent.indexOf("MSIE")>-1,ResourceStore=function(_EventEmitter){function ResourceStore(data){var _this,options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{ns:["translation"],defaultNS:"translation"};return _classCallCheck(this,ResourceStore),_this=_possibleConstructorReturn(this,_getPrototypeOf(ResourceStore).call(this)),isIE10&&EventEmitter.call(_assertThisInitialized(_this)),_this.data=data||{},_this.options=options,_this.options.keySeparator===undefined&&(_this.options.keySeparator="."),_this}return _inherits(ResourceStore,_EventEmitter),_createClass(ResourceStore,[{key:"addNamespaces",value:function(ns){this.options.ns.indexOf(ns)<0&&this.options.ns.push(ns)}},{key:"removeNamespaces",value:function(ns){var index=this.options.ns.indexOf(ns);index>-1&&this.options.ns.splice(index,1)}},{key:"getResource",value:function(lng,ns,key){var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{},keySeparator=options.keySeparator!==undefined?options.keySeparator:this.options.keySeparator,path=[lng,ns];return key&&typeof key!="string"&&(path=path.concat(key)),key&&typeof key=="string"&&(path=path.concat(keySeparator?key.split(keySeparator):key)),lng.indexOf(".")>-1&&(path=lng.split(".")),getPath(this.data,path)}},{key:"addResource",value:function(lng,ns,key,value){var options=arguments.length>4&&arguments[4]!==undefined?arguments[4]:{silent:!1},keySeparator=this.options.keySeparator,path;keySeparator===undefined&&(keySeparator=".");path=[lng,ns];key&&(path=path.concat(keySeparator?key.split(keySeparator):key));lng.indexOf(".")>-1&&(path=lng.split("."),value=ns,ns=path[1]);this.addNamespaces(ns);setPath(this.data,path,value);options.silent||this.emit("added",lng,ns,key,value)}},{key:"addResources",value:function(lng,ns,resources){var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{silent:!1};for(var m in resources)(typeof resources[m]=="string"||Object.prototype.toString.apply(resources[m])==="[object Array]")&&this.addResource(lng,ns,m,resources[m],{silent:!0});options.silent||this.emit("added",lng,ns,resources)}},{key:"addResourceBundle",value:function(lng,ns,resources,deep,overwrite){var options=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{silent:!1},path=[lng,ns],pack;lng.indexOf(".")>-1&&(path=lng.split("."),deep=resources,resources=ns,ns=path[1]);this.addNamespaces(ns);pack=getPath(this.data,path)||{};deep?deepExtend(pack,resources,overwrite):pack=_objectSpread({},pack,resources);setPath(this.data,path,pack);options.silent||this.emit("added",lng,ns,resources)}},{key:"removeResourceBundle",value:function(lng,ns){this.hasResourceBundle(lng,ns)&&delete this.data[lng][ns];this.removeNamespaces(ns);this.emit("removed",lng,ns)}},{key:"hasResourceBundle",value:function(lng,ns){return this.getResource(lng,ns)!==undefined}},{key:"getResourceBundle",value:function(lng,ns){return(ns||(ns=this.options.defaultNS),this.options.compatibilityAPI==="v1")?_objectSpread({},{},this.getResource(lng,ns)):this.getResource(lng,ns)}},{key:"getDataByLanguage",value:function(lng){return this.data[lng]}},{key:"toJSON",value:function(){return this.data}}]),ResourceStore}(EventEmitter),postProcessor={processors:{},addPostProcessor:function(module){this.processors[module.name]=module},handle:function(processors,value,key,options,translator){var _this=this;return processors.forEach(function(processor){_this.processors[processor]&&(value=_this.processors[processor].process(value,key,options,translator))}),value}},checkedLoadedFor={},Translator=function(_EventEmitter){function Translator(services){var _this,options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};return _classCallCheck(this,Translator),_this=_possibleConstructorReturn(this,_getPrototypeOf(Translator).call(this)),isIE10&&EventEmitter.call(_assertThisInitialized(_this)),copy(["resourceStore","languageUtils","pluralResolver","interpolator","backendConnector","i18nFormat","utils"],services,_assertThisInitialized(_this)),_this.options=options,_this.options.keySeparator===undefined&&(_this.options.keySeparator="."),_this.logger=baseLogger.create("translator"),_this}return _inherits(Translator,_EventEmitter),_createClass(Translator,[{key:"changeLanguage",value:function(lng){lng&&(this.language=lng)}},{key:"exists",value:function(key){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{interpolation:{}},resolved=this.resolve(key,options);return resolved&&resolved.res!==undefined}},{key:"extractFromKey",value:function(key,options){var nsSeparator=options.nsSeparator!==undefined?options.nsSeparator:this.options.nsSeparator,keySeparator,namespaces,m,parts;if(nsSeparator===undefined&&(nsSeparator=":"),keySeparator=options.keySeparator!==undefined?options.keySeparator:this.options.keySeparator,namespaces=options.ns||this.options.defaultNS,nsSeparator&&key.indexOf(nsSeparator)>-1){if(m=key.match(this.interpolator.nestingRegexp),m&&m.length>0)return{key:key,namespaces:namespaces};parts=key.split(nsSeparator);(nsSeparator!==keySeparator||nsSeparator===keySeparator&&this.options.ns.indexOf(parts[0])>-1)&&(namespaces=parts.shift());key=parts.join(keySeparator)}return typeof namespaces=="string"&&(namespaces=[namespaces]),{key:key,namespaces:namespaces}}},{key:"translate",value:function(keys,options,lastKey){var _this2=this,nsSeparator,m,deepKey,usedDefault,usedKey,suffix,updateMissing,fk,lngs,fallbackLngs,i,send,needsPluralHandling;if(_typeof(options)!=="object"&&this.options.overloadTranslationOptionHandler&&(options=this.options.overloadTranslationOptionHandler(arguments)),options||(options={}),keys===undefined||keys===null)return"";Array.isArray(keys)||(keys=[String(keys)]);var keySeparator=options.keySeparator!==undefined?options.keySeparator:this.options.keySeparator,_this$extractFromKey=this.extractFromKey(keys[keys.length-1],options),key=_this$extractFromKey.key,namespaces=_this$extractFromKey.namespaces,namespace=namespaces[namespaces.length-1],lng=options.lng||this.language,appendNamespaceToCIMode=options.appendNamespaceToCIMode||this.options.appendNamespaceToCIMode;if(lng&&lng.toLowerCase()==="cimode")return appendNamespaceToCIMode?(nsSeparator=options.nsSeparator||this.options.nsSeparator,namespace+nsSeparator+key):key;var resolved=this.resolve(keys,options),res=resolved&&resolved.res,resUsedKey=resolved&&resolved.usedKey||key,resExactUsedKey=resolved&&resolved.exactUsedKey||key,resType=Object.prototype.toString.apply(res),joinArrays=options.joinArrays!==undefined?options.joinArrays:this.options.joinArrays,handleAsObjectInI18nFormat=!this.i18nFormat||this.i18nFormat.handleAsObject,handleAsObject=typeof res!="string"&&typeof res!="boolean"&&typeof res!="number";if(handleAsObjectInI18nFormat&&res&&handleAsObject&&["[object Number]","[object Function]","[object RegExp]"].indexOf(resType)<0&&!(typeof joinArrays=="string"&&resType==="[object Array]")){if(!options.returnObjects&&!this.options.returnObjects)return this.logger.warn("accessing an object - but returnObjects options is not enabled!"),this.options.returnedObjectHandler?this.options.returnedObjectHandler(resUsedKey,res,options):"key '".concat(key," (").concat(this.language,")' returned an object instead of string.");if(keySeparator){var resTypeIsArray=resType==="[object Array]",copy=resTypeIsArray?[]:{},newKeyToUse=resTypeIsArray?resExactUsedKey:resUsedKey;for(m in res)Object.prototype.hasOwnProperty.call(res,m)&&(deepKey="".concat(newKeyToUse).concat(keySeparator).concat(m),copy[m]=this.translate(deepKey,_objectSpread({},options,{joinArrays:!1,ns:namespaces})),copy[m]===deepKey&&(copy[m]=res[m]));res=copy}}else if(handleAsObjectInI18nFormat&&typeof joinArrays=="string"&&resType==="[object Array]")res=res.join(joinArrays),res&&(res=this.extendTranslation(res,keys,options,lastKey));else{if(usedDefault=!1,usedKey=!1,this.isValidLookup(res)||options.defaultValue===undefined||(usedDefault=!0,options.count!==undefined&&(suffix=this.pluralResolver.getSuffix(lng,options.count),res=options["defaultValue".concat(suffix)]),res||(res=options.defaultValue)),this.isValidLookup(res)||(usedKey=!0,res=key),updateMissing=options.defaultValue&&options.defaultValue!==res&&this.options.updateMissing,usedKey||usedDefault||updateMissing){if(this.logger.log(updateMissing?"updateKey":"missingKey",lng,namespace,key,updateMissing?options.defaultValue:res),keySeparator&&(fk=this.resolve(key,_objectSpread({},options,{keySeparator:!1})),fk&&fk.res&&this.logger.warn("Seems the loaded translations were in flat JSON format instead of nested. Either set keySeparator: false on init or make sure your translations are published in nested format.")),lngs=[],fallbackLngs=this.languageUtils.getFallbackCodes(this.options.fallbackLng,options.lng||this.language),this.options.saveMissingTo==="fallback"&&fallbackLngs&&fallbackLngs[0])for(i=0;i<fallbackLngs.length;i++)lngs.push(fallbackLngs[i]);else this.options.saveMissingTo==="all"?lngs=this.languageUtils.toResolveHierarchy(options.lng||this.language):lngs.push(options.lng||this.language);send=function(l,k){_this2.options.missingKeyHandler?_this2.options.missingKeyHandler(l,namespace,k,updateMissing?options.defaultValue:res,updateMissing,options):_this2.backendConnector&&_this2.backendConnector.saveMissing&&_this2.backendConnector.saveMissing(l,namespace,k,updateMissing?options.defaultValue:res,updateMissing,options);_this2.emit("missingKey",l,namespace,k,res)};this.options.saveMissing&&(needsPluralHandling=options.count!==undefined&&typeof options.count!="string",this.options.saveMissingPlurals&&needsPluralHandling?lngs.forEach(function(l){var plurals=_this2.pluralResolver.getPluralFormsOfKey(l,key);plurals.forEach(function(p){return send([l],p)})}):send(lngs,key))}res=this.extendTranslation(res,keys,options,resolved,lastKey);usedKey&&res===key&&this.options.appendNamespaceToMissingKey&&(res="".concat(namespace,":").concat(key));usedKey&&this.options.parseMissingKeyHandler&&(res=this.options.parseMissingKeyHandler(res))}return res}},{key:"extendTranslation",value:function(res,key,options,resolved,lastKey){var _this3=this,skipOnVariables,nestBef,nb,data,na,nestAft,postProcess,postProcessorNames;return this.i18nFormat&&this.i18nFormat.parse?res=this.i18nFormat.parse(res,options,resolved.usedLng,resolved.usedNS,resolved.usedKey,{resolved:resolved}):options.skipInterpolation||(options.interpolation&&this.interpolator.init(_objectSpread({},options,{interpolation:_objectSpread({},this.options.interpolation,options.interpolation)})),skipOnVariables=options.interpolation&&options.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,skipOnVariables&&(nb=res.match(this.interpolator.nestingRegexp),nestBef=nb&&nb.length),data=options.replace&&typeof options.replace!="string"?options.replace:options,this.options.interpolation.defaultVariables&&(data=_objectSpread({},this.options.interpolation.defaultVariables,data)),res=this.interpolator.interpolate(res,data,options.lng||this.language,options),skipOnVariables&&(na=res.match(this.interpolator.nestingRegexp),nestAft=na&&na.length,nestBef<nestAft&&(options.nest=!1)),options.nest!==!1&&(res=this.interpolator.nest(res,function(){for(var _len=arguments.length,args=new Array(_len),_key=0;_key<_len;_key++)args[_key]=arguments[_key];return lastKey&&lastKey[0]===args[0]&&!options.context?(_this3.logger.warn("It seems you are nesting recursively key: ".concat(args[0]," in key: ").concat(key[0])),null):_this3.translate.apply(_this3,args.concat([key]))},options)),options.interpolation&&this.interpolator.reset()),postProcess=options.postProcess||this.options.postProcess,postProcessorNames=typeof postProcess=="string"?[postProcess]:postProcess,res!==undefined&&res!==null&&postProcessorNames&&postProcessorNames.length&&options.applyPostProcessor!==!1&&(res=postProcessor.handle(postProcessorNames,res,key,this.options&&this.options.postProcessPassResolved?_objectSpread({i18nResolved:resolved},options):options,this)),res}},{key:"resolve",value:function(keys){var _this4=this,options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},found,usedKey,exactUsedKey,usedLng,usedNS;return typeof keys=="string"&&(keys=[keys]),keys.forEach(function(k){var extracted,key,namespaces;if(!_this4.isValidLookup(found)){extracted=_this4.extractFromKey(k,options);key=extracted.key;usedKey=key;namespaces=extracted.namespaces;_this4.options.fallbackNS&&(namespaces=namespaces.concat(_this4.options.fallbackNS));var needsPluralHandling=options.count!==undefined&&typeof options.count!="string",needsContextHandling=options.context!==undefined&&typeof options.context=="string"&&options.context!=="",codes=options.lngs?options.lngs:_this4.languageUtils.toResolveHierarchy(options.lng||_this4.language,options.fallbackLng);namespaces.forEach(function(ns){_this4.isValidLookup(found)||(usedNS=ns,!checkedLoadedFor["".concat(codes[0],"-").concat(ns)]&&_this4.utils&&_this4.utils.hasLoadedNamespace&&!_this4.utils.hasLoadedNamespace(usedNS)&&(checkedLoadedFor["".concat(codes[0],"-").concat(ns)]=!0,_this4.logger.warn('key "'.concat(usedKey,'" for languages "').concat(codes.join(", "),'" won\'t get resolved as namespace "').concat(usedNS,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!")),codes.forEach(function(code){var finalKey,finalKeys,pluralSuffix,possibleKey;if(!_this4.isValidLookup(found))for(usedLng=code,finalKey=key,finalKeys=[finalKey],_this4.i18nFormat&&_this4.i18nFormat.addLookupKeys?_this4.i18nFormat.addLookupKeys(finalKeys,key,code,ns,options):(needsPluralHandling&&(pluralSuffix=_this4.pluralResolver.getSuffix(code,options.count)),needsPluralHandling&&needsContextHandling&&finalKeys.push(finalKey+pluralSuffix),needsContextHandling&&finalKeys.push(finalKey+="".concat(_this4.options.contextSeparator).concat(options.context)),needsPluralHandling&&finalKeys.push(finalKey+=pluralSuffix));possibleKey=finalKeys.pop();)_this4.isValidLookup(found)||(exactUsedKey=possibleKey,found=_this4.getResource(code,ns,possibleKey,options))}))})}}),{res:found,usedKey:usedKey,exactUsedKey:exactUsedKey,usedLng:usedLng,usedNS:usedNS}}},{key:"isValidLookup",value:function(res){return res!==undefined&&!(!this.options.returnNull&&res===null)&&!(!this.options.returnEmptyString&&res==="")}},{key:"getResource",value:function(code,ns,key){var options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};return this.i18nFormat&&this.i18nFormat.getResource?this.i18nFormat.getResource(code,ns,key,options):this.resourceStore.getResource(code,ns,key,options)}}]),Translator}(EventEmitter),LanguageUtil=function(){function LanguageUtil(options){_classCallCheck(this,LanguageUtil);this.options=options;this.whitelist=this.options.supportedLngs||!1;this.supportedLngs=this.options.supportedLngs||!1;this.logger=baseLogger.create("languageUtils")}return _createClass(LanguageUtil,[{key:"getScriptPartFromCode",value:function(code){if(!code||code.indexOf("-")<0)return null;var p=code.split("-");return p.length===2?null:(p.pop(),p[p.length-1].toLowerCase()==="x")?null:this.formatLanguageCode(p.join("-"))}},{key:"getLanguagePartFromCode",value:function(code){if(!code||code.indexOf("-")<0)return code;var p=code.split("-");return this.formatLanguageCode(p[0])}},{key:"formatLanguageCode",value:function(code){if(typeof code=="string"&&code.indexOf("-")>-1){var specialCases=["hans","hant","latn","cyrl","cans","mong","arab"],p=code.split("-");return this.options.lowerCaseLng?p=p.map(function(part){return part.toLowerCase()}):p.length===2?(p[0]=p[0].toLowerCase(),p[1]=p[1].toUpperCase(),specialCases.indexOf(p[1].toLowerCase())>-1&&(p[1]=capitalize(p[1].toLowerCase()))):p.length===3&&(p[0]=p[0].toLowerCase(),p[1].length===2&&(p[1]=p[1].toUpperCase()),p[0]!=="sgn"&&p[2].length===2&&(p[2]=p[2].toUpperCase()),specialCases.indexOf(p[1].toLowerCase())>-1&&(p[1]=capitalize(p[1].toLowerCase())),specialCases.indexOf(p[2].toLowerCase())>-1&&(p[2]=capitalize(p[2].toLowerCase()))),p.join("-")}return this.options.cleanCode||this.options.lowerCaseLng?code.toLowerCase():code}},{key:"isWhitelisted",value:function(code){return this.logger.deprecate("languageUtils.isWhitelisted",'function "isWhitelisted" will be renamed to "isSupportedCode" in the next major - please make sure to rename it\'s usage asap.'),this.isSupportedCode(code)}},{key:"isSupportedCode",value:function(code){return(this.options.load==="languageOnly"||this.options.nonExplicitSupportedLngs)&&(code=this.getLanguagePartFromCode(code)),!this.supportedLngs||!this.supportedLngs.length||this.supportedLngs.indexOf(code)>-1}},{key:"getBestMatchFromCodes",value:function(codes){var _this=this,found;return codes?(codes.forEach(function(code){if(!found){var cleanedLng=_this.formatLanguageCode(code);(!_this.options.supportedLngs||_this.isSupportedCode(cleanedLng))&&(found=cleanedLng)}}),!found&&this.options.supportedLngs&&codes.forEach(function(code){if(!found){var lngOnly=_this.getLanguagePartFromCode(code);if(_this.isSupportedCode(lngOnly))return found=lngOnly;found=_this.options.supportedLngs.find(function(supportedLng){if(supportedLng.indexOf(lngOnly)===0)return supportedLng})}}),found||(found=this.getFallbackCodes(this.options.fallbackLng)[0]),found):null}},{key:"getFallbackCodes",value:function(fallbacks,code){if(!fallbacks)return[];if(typeof fallbacks=="function"&&(fallbacks=fallbacks(code)),typeof fallbacks=="string"&&(fallbacks=[fallbacks]),Object.prototype.toString.apply(fallbacks)==="[object Array]")return fallbacks;if(!code)return fallbacks["default"]||[];var found=fallbacks[code];return found||(found=fallbacks[this.getScriptPartFromCode(code)]),found||(found=fallbacks[this.formatLanguageCode(code)]),found||(found=fallbacks[this.getLanguagePartFromCode(code)]),found||(found=fallbacks["default"]),found||[]}},{key:"toResolveHierarchy",value:function(code,fallbackCode){var _this2=this,fallbackCodes=this.getFallbackCodes(fallbackCode||this.options.fallbackLng||[],code),codes=[],addCode=function(c){c&&(_this2.isSupportedCode(c)?codes.push(c):_this2.logger.warn("rejecting language code not found in supportedLngs: ".concat(c)))};return typeof code=="string"&&code.indexOf("-")>-1?(this.options.load!=="languageOnly"&&addCode(this.formatLanguageCode(code)),this.options.load!=="languageOnly"&&this.options.load!=="currentOnly"&&addCode(this.getScriptPartFromCode(code)),this.options.load!=="currentOnly"&&addCode(this.getLanguagePartFromCode(code))):typeof code=="string"&&addCode(this.formatLanguageCode(code)),fallbackCodes.forEach(function(fc){codes.indexOf(fc)<0&&addCode(_this2.formatLanguageCode(fc))}),codes}}]),LanguageUtil}(),sets=[{lngs:["ach","ak","am","arn","br","fil","gun","ln","mfe","mg","mi","oc","pt","pt-BR","tg","ti","tr","uz","wa"],nr:[1,2],fc:1},{lngs:["af","an","ast","az","bg","bn","ca","da","de","dev","el","en","eo","es","et","eu","fi","fo","fur","fy","gl","gu","ha","hi","hu","hy","ia","it","kn","ku","lb","mai","ml","mn","mr","nah","nap","nb","ne","nl","nn","no","nso","pa","pap","pms","ps","pt-PT","rm","sco","se","si","so","son","sq","sv","sw","ta","te","tk","ur","yo"],nr:[1,2],fc:2},{lngs:["ay","bo","cgg","fa","ht","id","ja","jbo","ka","kk","km","ko","ky","lo","ms","sah","su","th","tt","ug","vi","wo","zh"],nr:[1],fc:3},{lngs:["be","bs","cnr","dz","hr","ru","sr","uk"],nr:[1,2,5],fc:4},{lngs:["ar"],nr:[0,1,2,3,11,100],fc:5},{lngs:["cs","sk"],nr:[1,2,5],fc:6},{lngs:["csb","pl"],nr:[1,2,5],fc:7},{lngs:["cy"],nr:[1,2,3,8],fc:8},{lngs:["fr"],nr:[1,2],fc:9},{lngs:["ga"],nr:[1,2,3,7,11],fc:10},{lngs:["gd"],nr:[1,2,3,20],fc:11},{lngs:["is"],nr:[1,2],fc:12},{lngs:["jv"],nr:[0,1],fc:13},{lngs:["kw"],nr:[1,2,3,4],fc:14},{lngs:["lt"],nr:[1,2,10],fc:15},{lngs:["lv"],nr:[1,2,0],fc:16},{lngs:["mk"],nr:[1,2],fc:17},{lngs:["mnk"],nr:[0,1,2],fc:18},{lngs:["mt"],nr:[1,2,11,20],fc:19},{lngs:["or"],nr:[2,1],fc:2},{lngs:["ro"],nr:[1,2,20],fc:20},{lngs:["sl"],nr:[5,1,2,3],fc:21},{lngs:["he","iw"],nr:[1,2,20,21],fc:22}],_rulesPluralsTypes={1:function(n){return Number(n>1)},2:function(n){return Number(n!=1)},3:function(){return 0},4:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2)},5:function(n){return Number(n==0?0:n==1?1:n==2?2:n%100>=3&&n%100<=10?3:n%100>=11?4:5)},6:function(n){return Number(n==1?0:n>=2&&n<=4?1:2)},7:function(n){return Number(n==1?0:n%10>=2&&n%10<=4&&(n%100<10||n%100>=20)?1:2)},8:function(n){return Number(n==1?0:n==2?1:n!=8&&n!=11?2:3)},9:function(n){return Number(n>=2)},10:function(n){return Number(n==1?0:n==2?1:n<7?2:n<11?3:4)},11:function(n){return Number(n==1||n==11?0:n==2||n==12?1:n>2&&n<20?2:3)},12:function(n){return Number(n%10!=1||n%100==11)},13:function(n){return Number(n!==0)},14:function(n){return Number(n==1?0:n==2?1:n==3?2:3)},15:function(n){return Number(n%10==1&&n%100!=11?0:n%10>=2&&(n%100<10||n%100>=20)?1:2)},16:function(n){return Number(n%10==1&&n%100!=11?0:n!==0?1:2)},17:function(n){return Number(n==1||n%10==1&&n%100!=11?0:1)},18:function(n){return Number(n==0?0:n==1?1:2)},19:function(n){return Number(n==1?0:n==0||n%100>1&&n%100<11?1:n%100>10&&n%100<20?2:3)},20:function(n){return Number(n==1?0:n==0||n%100>0&&n%100<20?1:2)},21:function(n){return Number(n%100==1?1:n%100==2?2:n%100==3||n%100==4?3:0)},22:function(n){return Number(n==1?0:n==2?1:(n<0||n>10)&&n%10==0?2:3)}},PluralResolver=function(){function PluralResolver(languageUtils){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};_classCallCheck(this,PluralResolver);this.languageUtils=languageUtils;this.options=options;this.logger=baseLogger.create("pluralResolver");this.rules=createRules()}return _createClass(PluralResolver,[{key:"addRule",value:function(lng,obj){this.rules[lng]=obj}},{key:"getRule",value:function(code){return this.rules[code]||this.rules[this.languageUtils.getLanguagePartFromCode(code)]}},{key:"needsPlural",value:function(code){var rule=this.getRule(code);return rule&&rule.numbers.length>1}},{key:"getPluralFormsOfKey",value:function(code,key){var _this=this,ret=[],rule=this.getRule(code);return rule?(rule.numbers.forEach(function(n){var suffix=_this.getSuffix(code,n);ret.push("".concat(key).concat(suffix))}),ret):ret}},{key:"getSuffix",value:function(code,count){var _this2=this,rule=this.getRule(code),idx,suffix,returnSuffix;return rule?(idx=rule.noAbs?rule.plurals(count):rule.plurals(Math.abs(count)),suffix=rule.numbers[idx],this.options.simplifyPluralSuffix&&rule.numbers.length===2&&rule.numbers[0]===1&&(suffix===2?suffix="plural":suffix===1&&(suffix="")),returnSuffix=function(){return _this2.options.prepend&&suffix.toString()?_this2.options.prepend+suffix.toString():suffix.toString()},this.options.compatibilityJSON==="v1")?suffix===1?"":typeof suffix=="number"?"_plural_".concat(suffix.toString()):returnSuffix():this.options.compatibilityJSON==="v2"||this.options.simplifyPluralSuffix&&rule.numbers.length===2&&rule.numbers[0]===1?returnSuffix():this.options.prepend&&idx.toString()?this.options.prepend+idx.toString():idx.toString():(this.logger.warn("no plural rule found for: ".concat(code)),"")}}]),PluralResolver}(),Interpolator=function(){function Interpolator(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};_classCallCheck(this,Interpolator);this.logger=baseLogger.create("interpolator");this.options=options;this.format=options.interpolation&&options.interpolation.format||function(value){return value};this.init(options)}return _createClass(Interpolator,[{key:"init",value:function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},iOpts;options.interpolation||(options.interpolation={escapeValue:!0});iOpts=options.interpolation;this.escape=iOpts.escape!==undefined?iOpts.escape:escape;this.escapeValue=iOpts.escapeValue!==undefined?iOpts.escapeValue:!0;this.useRawValueToEscape=iOpts.useRawValueToEscape!==undefined?iOpts.useRawValueToEscape:!1;this.prefix=iOpts.prefix?regexEscape(iOpts.prefix):iOpts.prefixEscaped||"{{";this.suffix=iOpts.suffix?regexEscape(iOpts.suffix):iOpts.suffixEscaped||"}}";this.formatSeparator=iOpts.formatSeparator?iOpts.formatSeparator:iOpts.formatSeparator||",";this.unescapePrefix=iOpts.unescapeSuffix?"":iOpts.unescapePrefix||"-";this.unescapeSuffix=this.unescapePrefix?"":iOpts.unescapeSuffix||"";this.nestingPrefix=iOpts.nestingPrefix?regexEscape(iOpts.nestingPrefix):iOpts.nestingPrefixEscaped||regexEscape("$t(");this.nestingSuffix=iOpts.nestingSuffix?regexEscape(iOpts.nestingSuffix):iOpts.nestingSuffixEscaped||regexEscape(")");this.nestingOptionsSeparator=iOpts.nestingOptionsSeparator?iOpts.nestingOptionsSeparator:iOpts.nestingOptionsSeparator||",";this.maxReplaces=iOpts.maxReplaces?iOpts.maxReplaces:1e3;this.alwaysFormat=iOpts.alwaysFormat!==undefined?iOpts.alwaysFormat:!1;this.resetRegExp()}},{key:"reset",value:function(){this.options&&this.init(this.options)}},{key:"resetRegExp",value:function(){var regexpStr="".concat(this.prefix,"(.+?)").concat(this.suffix),regexpUnescapeStr,nestingRegexpStr;this.regexp=new RegExp(regexpStr,"g");regexpUnescapeStr="".concat(this.prefix).concat(this.unescapePrefix,"(.+?)").concat(this.unescapeSuffix).concat(this.suffix);this.regexpUnescape=new RegExp(regexpUnescapeStr,"g");nestingRegexpStr="".concat(this.nestingPrefix,"(.+?)").concat(this.nestingSuffix);this.nestingRegexp=new RegExp(nestingRegexpStr,"g")}},{key:"interpolate",value:function(str,data,lng,options){function regexSafe(val){return val.replace(/\$/g,"$$$$")}var _this=this,match,value,replaces,defaultData=this.options&&this.options.interpolation&&this.options.interpolation.defaultVariables||{},handleFormat=function(key){var path;if(key.indexOf(_this.formatSeparator)<0)return path=getPathWithDefaults(data,defaultData,key),_this.alwaysFormat?_this.format(path,undefined,lng):path;var p=key.split(_this.formatSeparator),k=p.shift().trim(),f=p.join(_this.formatSeparator).trim();return _this.format(getPathWithDefaults(data,defaultData,k),f,lng,options)};this.resetRegExp();var missingInterpolationHandler=options&&options.missingInterpolationHandler||this.options.missingInterpolationHandler,skipOnVariables=options&&options.interpolation&&options.interpolation.skipOnVariables||this.options.interpolation.skipOnVariables,todos=[{regex:this.regexpUnescape,safeValue:function(val){return regexSafe(val)}},{regex:this.regexp,safeValue:function(val){return _this.escapeValue?regexSafe(_this.escape(val)):regexSafe(val)}}];return todos.forEach(function(todo){for(replaces=0;match=todo.regex.exec(str);){if(value=handleFormat(match[1].trim()),value===undefined)if(typeof missingInterpolationHandler=="function"){var temp=missingInterpolationHandler(str,match,options);value=typeof temp=="string"?temp:""}else if(skipOnVariables){value=match[0];continue}else _this.logger.warn("missed to pass in variable ".concat(match[1]," for interpolating ").concat(str)),value="";else typeof value=="string"||_this.useRawValueToEscape||(value=makeString(value));if(str=str.replace(match[0],todo.safeValue(value)),todo.regex.lastIndex=0,replaces++,replaces>=_this.maxReplaces)break}}),str}},{key:"nest",value:function(str,fc){function handleHasOptions(key,inheritedOptions){var sep=this.nestingOptionsSeparator,c,optionsString;if(key.indexOf(sep)<0)return key;c=key.split(new RegExp("".concat(sep,"[ ]*{")));optionsString="{".concat(c[1]);key=c[0];optionsString=this.interpolate(optionsString,clonedOptions);optionsString=optionsString.replace(/'/g,'"');try{clonedOptions=JSON.parse(optionsString);inheritedOptions&&(clonedOptions=_objectSpread({},inheritedOptions,clonedOptions))}catch(e){return this.logger.warn("failed parsing options string in nesting for key ".concat(key),e),"".concat(key).concat(sep).concat(optionsString)}return delete clonedOptions.defaultValue,key}var _this2=this,options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},match,value,clonedOptions=_objectSpread({},options),formatters,doReduce,r;for(clonedOptions.applyPostProcessor=!1,delete clonedOptions.defaultValue;match=this.nestingRegexp.exec(str);){if(formatters=[],doReduce=!1,match[0].includes(this.formatSeparator)&&!/{.*}/.test(match[1])&&(r=match[1].split(this.formatSeparator).map(function(elem){return elem.trim()}),match[1]=r.shift(),formatters=r,doReduce=!0),value=fc(handleHasOptions.call(this,match[1].trim(),clonedOptions),clonedOptions),value&&match[0]===str&&typeof value!="string")return value;typeof value!="string"&&(value=makeString(value));value||(this.logger.warn("missed to resolve ".concat(match[1]," for nesting ").concat(str)),value="");doReduce&&(value=formatters.reduce(function(v,f){return _this2.format(v,f,options.lng,options)},value.trim()));str=str.replace(match[0],value);this.regexp.lastIndex=0}return str}}]),Interpolator}(),Connector=function(_EventEmitter){function Connector(backend,store,services){var _this,options=arguments.length>3&&arguments[3]!==undefined?arguments[3]:{};return _classCallCheck(this,Connector),_this=_possibleConstructorReturn(this,_getPrototypeOf(Connector).call(this)),isIE10&&EventEmitter.call(_assertThisInitialized(_this)),_this.backend=backend,_this.store=store,_this.services=services,_this.languageUtils=services.languageUtils,_this.options=options,_this.logger=baseLogger.create("backendConnector"),_this.state={},_this.queue=[],_this.backend&&_this.backend.init&&_this.backend.init(services,options.backend,options),_this}return _inherits(Connector,_EventEmitter),_createClass(Connector,[{key:"queueLoad",value:function(languages,namespaces,options,callback){var _this2=this,toLoad=[],pending=[],toLoadLanguages=[],toLoadNamespaces=[];return languages.forEach(function(lng){var hasAllNamespaces=!0;namespaces.forEach(function(ns){var name="".concat(lng,"|").concat(ns);!options.reload&&_this2.store.hasResourceBundle(lng,ns)?_this2.state[name]=2:_this2.state[name]<0||(_this2.state[name]===1?pending.indexOf(name)<0&&pending.push(name):(_this2.state[name]=1,hasAllNamespaces=!1,pending.indexOf(name)<0&&pending.push(name),toLoad.indexOf(name)<0&&toLoad.push(name),toLoadNamespaces.indexOf(ns)<0&&toLoadNamespaces.push(ns)))});hasAllNamespaces||toLoadLanguages.push(lng)}),(toLoad.length||pending.length)&&this.queue.push({pending:pending,loaded:{},errors:[],callback:callback}),{toLoad:toLoad,pending:pending,toLoadLanguages:toLoadLanguages,toLoadNamespaces:toLoadNamespaces}}},{key:"loaded",value:function(name,err,data){var s=name.split("|"),lng=s[0],ns=s[1],loaded;err&&this.emit("failedLoading",lng,ns,err);data&&this.store.addResourceBundle(lng,ns,data);this.state[name]=err?-1:2;loaded={};this.queue.forEach(function(q){pushPath(q.loaded,[lng],ns);remove(q.pending,name);err&&q.errors.push(err);q.pending.length!==0||q.done||(Object.keys(q.loaded).forEach(function(l){loaded[l]||(loaded[l]=[]);q.loaded[l].length&&q.loaded[l].forEach(function(ns){loaded[l].indexOf(ns)<0&&loaded[l].push(ns)})}),q.done=!0,q.errors.length?q.callback(q.errors):q.callback())});this.emit("loaded",loaded);this.queue=this.queue.filter(function(q){return!q.done})}},{key:"read",value:function(lng,ns,fcName){var _this3=this,tried=arguments.length>3&&arguments[3]!==undefined?arguments[3]:0,wait=arguments.length>4&&arguments[4]!==undefined?arguments[4]:350,callback=arguments.length>5?arguments[5]:undefined;return lng.length?this.backend[fcName](lng,ns,function(err,data){if(err&&data&&tried<5){setTimeout(function(){_this3.read.call(_this3,lng,ns,fcName,tried+1,wait*2,callback)},wait);return}callback(err,data)}):callback(null,{})}},{key:"prepareLoading",value:function(languages,namespaces){var _this4=this,options=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{},callback=arguments.length>3?arguments[3]:undefined,toLoad;if(!this.backend)return this.logger.warn("No backend was added via i18next.use. Will not load resources."),callback&&callback();if(typeof languages=="string"&&(languages=this.languageUtils.toResolveHierarchy(languages)),typeof namespaces=="string"&&(namespaces=[namespaces]),toLoad=this.queueLoad(languages,namespaces,options,callback),!toLoad.toLoad.length)return toLoad.pending.length||callback(),null;toLoad.toLoad.forEach(function(name){_this4.loadOne(name)})}},{key:"load",value:function(languages,namespaces,callback){this.prepareLoading(languages,namespaces,{},callback)}},{key:"reload",value:function(languages,namespaces,callback){this.prepareLoading(languages,namespaces,{reload:!0},callback)}},{key:"loadOne",value:function(name){var _this5=this,prefix=arguments.length>1&&arguments[1]!==undefined?arguments[1]:"",s=name.split("|"),lng=s[0],ns=s[1];this.read(lng,ns,"read",undefined,undefined,function(err,data){err&&_this5.logger.warn("".concat(prefix,"loading namespace ").concat(ns," for language ").concat(lng," failed"),err);!err&&data&&_this5.logger.log("".concat(prefix,"loaded namespace ").concat(ns," for language ").concat(lng),data);_this5.loaded(name,err,data)})}},{key:"saveMissing",value:function(languages,namespace,key,fallbackValue,isUpdate){var options=arguments.length>5&&arguments[5]!==undefined?arguments[5]:{};if(this.services.utils&&this.services.utils.hasLoadedNamespace&&!this.services.utils.hasLoadedNamespace(namespace)){this.logger.warn('did not save key "'.concat(key,'" as the namespace "').concat(namespace,'" was not yet loaded'),"This means something IS WRONG in your setup. You access the t function before i18next.init / i18next.loadNamespace / i18next.changeLanguage was done. Wait for the callback or Promise to resolve before accessing it!!!");return}key!==undefined&&key!==null&&key!==""&&(this.backend&&this.backend.create&&this.backend.create(languages,namespace,key,fallbackValue,null,_objectSpread({},options,{isUpdate:isUpdate})),languages&&languages[0])&&this.store.addResource(languages[0],namespace,key,fallbackValue)}}]),Connector}(EventEmitter),I18n=function(_EventEmitter){function I18n(){var _this,options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},callback=arguments.length>1?arguments[1]:undefined;if(_classCallCheck(this,I18n),_this=_possibleConstructorReturn(this,_getPrototypeOf(I18n).call(this)),isIE10&&EventEmitter.call(_assertThisInitialized(_this)),_this.options=transformOptions(options),_this.services={},_this.logger=baseLogger,_this.modules={external:[]},callback&&!_this.isInitialized&&!options.isClone){if(!_this.options.initImmediate)return _this.init(options,callback),_possibleConstructorReturn(_this,_assertThisInitialized(_this));setTimeout(function(){_this.init(options,callback)},0)}return _this}return _inherits(I18n,_EventEmitter),_createClass(I18n,[{key:"init",value:function(){function createClassOnDemand(ClassOrObject){return ClassOrObject?typeof ClassOrObject=="function"?new ClassOrObject:ClassOrObject:null}var _this2=this,options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},callback=arguments.length>1?arguments[1]:undefined,lu,s,codes,storeApi,storeApiChained,deferred,load;if(typeof options=="function"&&(callback=options,options={}),options.whitelist&&!options.supportedLngs&&this.logger.deprecate("whitelist",'option "whitelist" will be renamed to "supportedLngs" in the next major - please make sure to rename this option asap.'),options.nonExplicitWhitelist&&!options.nonExplicitSupportedLngs&&this.logger.deprecate("whitelist",'options "nonExplicitWhitelist" will be renamed to "nonExplicitSupportedLngs" in the next major - please make sure to rename this option asap.'),this.options=_objectSpread({},get(),this.options,transformOptions(options)),this.format=this.options.interpolation.format,callback||(callback=noop),!this.options.isClone){this.modules.logger?baseLogger.init(createClassOnDemand(this.modules.logger),this.options):baseLogger.init(null,this.options);lu=new LanguageUtil(this.options);this.store=new ResourceStore(this.options.resources,this.options);s=this.services;s.logger=baseLogger;s.resourceStore=this.store;s.languageUtils=lu;s.pluralResolver=new PluralResolver(lu,{prepend:this.options.pluralSeparator,compatibilityJSON:this.options.compatibilityJSON,simplifyPluralSuffix:this.options.simplifyPluralSuffix});s.interpolator=new Interpolator(this.options);s.utils={hasLoadedNamespace:this.hasLoadedNamespace.bind(this)};s.backendConnector=new Connector(createClassOnDemand(this.modules.backend),s.resourceStore,s,this.options);s.backendConnector.on("*",function(event){for(var _len=arguments.length,args=new Array(_len>1?_len-1:0),_key=1;_key<_len;_key++)args[_key-1]=arguments[_key];_this2.emit.apply(_this2,[event].concat(args))});this.modules.languageDetector&&(s.languageDetector=createClassOnDemand(this.modules.languageDetector),s.languageDetector.init(s,this.options.detection,this.options));this.modules.i18nFormat&&(s.i18nFormat=createClassOnDemand(this.modules.i18nFormat),s.i18nFormat.init&&s.i18nFormat.init(this));this.translator=new Translator(this.services,this.options);this.translator.on("*",function(event){for(var _len2=arguments.length,args=new Array(_len2>1?_len2-1:0),_key2=1;_key2<_len2;_key2++)args[_key2-1]=arguments[_key2];_this2.emit.apply(_this2,[event].concat(args))});this.modules.external.forEach(function(m){m.init&&m.init(_this2)})}return!this.options.fallbackLng||this.services.languageDetector||this.options.lng||(codes=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng),codes.length>0&&codes[0]!=="dev"&&(this.options.lng=codes[0])),this.services.languageDetector||this.options.lng||this.logger.warn("init: no languageDetector is used and no lng is defined"),storeApi=["getResource","hasResourceBundle","getResourceBundle","getDataByLanguage"],storeApi.forEach(function(fcName){_this2[fcName]=function(){var _this2$store;return(_this2$store=_this2.store)[fcName].apply(_this2$store,arguments)}}),storeApiChained=["addResource","addResources","addResourceBundle","removeResourceBundle"],storeApiChained.forEach(function(fcName){_this2[fcName]=function(){var _this2$store2;return(_this2$store2=_this2.store)[fcName].apply(_this2$store2,arguments),_this2}}),deferred=defer(),load=function(){_this2.changeLanguage(_this2.options.lng,function(err,t){_this2.isInitialized=!0;_this2.options.isClone||_this2.logger.log("initialized",_this2.options);_this2.emit("initialized",_this2.options);deferred.resolve(t);callback(err,t)})},this.options.resources||!this.options.initImmediate?load():setTimeout(load,0),deferred}},{key:"loadResources",value:function(language){var _this3=this,callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:noop,usedCallback=callback,usedLng=typeof language=="string"?language:this.language,toLoad,append,fallbacks;if(typeof language=="function"&&(usedCallback=language),!this.options.resources||this.options.partialBundledLanguages){if(usedLng&&usedLng.toLowerCase()==="cimode")return usedCallback();toLoad=[];append=function(lng){if(lng){var lngs=_this3.services.languageUtils.toResolveHierarchy(lng);lngs.forEach(function(l){toLoad.indexOf(l)<0&&toLoad.push(l)})}};usedLng?append(usedLng):(fallbacks=this.services.languageUtils.getFallbackCodes(this.options.fallbackLng),fallbacks.forEach(function(l){return append(l)}));this.options.preload&&this.options.preload.forEach(function(l){return append(l)});this.services.backendConnector.load(toLoad,this.options.ns,usedCallback)}else usedCallback(null)}},{key:"reloadResources",value:function(lngs,ns,callback){var deferred=defer();return lngs||(lngs=this.languages),ns||(ns=this.options.ns),callback||(callback=noop),this.services.backendConnector.reload(lngs,ns,function(err){deferred.resolve();callback(err)}),deferred}},{key:"use",value:function(module){if(!module)throw new Error("You are passing an undefined module! Please check the object you are passing to i18next.use()");if(!module.type)throw new Error("You are passing a wrong module! Please check the object you are passing to i18next.use()");return module.type==="backend"&&(this.modules.backend=module),(module.type==="logger"||module.log&&module.warn&&module.error)&&(this.modules.logger=module),module.type==="languageDetector"&&(this.modules.languageDetector=module),module.type==="i18nFormat"&&(this.modules.i18nFormat=module),module.type==="postProcessor"&&postProcessor.addPostProcessor(module),module.type==="3rdParty"&&this.modules.external.push(module),this}},{key:"changeLanguage",value:function(lng,callback){var _this4=this,deferred,done,setLng;return this.isLanguageChangingTo=lng,deferred=defer(),this.emit("languageChanging",lng),done=function(err,l){l?(_this4.language=l,_this4.languages=_this4.services.languageUtils.toResolveHierarchy(l),_this4.translator.changeLanguage(l),_this4.isLanguageChangingTo=undefined,_this4.emit("languageChanged",l),_this4.logger.log("languageChanged",l)):_this4.isLanguageChangingTo=undefined;deferred.resolve(function(){return _this4.t.apply(_this4,arguments)});callback&&callback(err,function(){return _this4.t.apply(_this4,arguments)})},setLng=function(lngs){var l=typeof lngs=="string"?lngs:_this4.services.languageUtils.getBestMatchFromCodes(lngs);l&&(_this4.language||(_this4.language=l,_this4.languages=_this4.services.languageUtils.toResolveHierarchy(l)),_this4.translator.language||_this4.translator.changeLanguage(l),_this4.services.languageDetector&&_this4.services.languageDetector.cacheUserLanguage(l));_this4.loadResources(l,function(err){done(err,l)})},lng||!this.services.languageDetector||this.services.languageDetector.async?!lng&&this.services.languageDetector&&this.services.languageDetector.async?this.services.languageDetector.detect(setLng):setLng(lng):setLng(this.services.languageDetector.detect()),deferred}},{key:"getFixedT",value:function(lng,ns){var _this5=this,fixedT=function fixedT(key,opts){var options;if(_typeof(opts)!=="object"){for(var _len3=arguments.length,rest=new Array(_len3>2?_len3-2:0),_key3=2;_key3<_len3;_key3++)rest[_key3-2]=arguments[_key3];options=_this5.options.overloadTranslationOptionHandler([key,opts].concat(rest))}else options=_objectSpread({},opts);return options.lng=options.lng||fixedT.lng,options.lngs=options.lngs||fixedT.lngs,options.ns=options.ns||fixedT.ns,_this5.t(key,options)};return typeof lng=="string"?fixedT.lng=lng:fixedT.lngs=lng,fixedT.ns=ns,fixedT}},{key:"t",value:function(){var _this$translator;return this.translator&&(_this$translator=this.translator).translate.apply(_this$translator,arguments)}},{key:"exists",value:function(){var _this$translator2;return this.translator&&(_this$translator2=this.translator).exists.apply(_this$translator2,arguments)}},{key:"setDefaultNamespace",value:function(ns){this.options.defaultNS=ns}},{key:"hasLoadedNamespace",value:function(ns){var _this6=this,options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},loadNotPending,preResult;if(!this.isInitialized)return this.logger.warn("hasLoadedNamespace: i18next was not initialized",this.languages),!1;if(!this.languages||!this.languages.length)return this.logger.warn("hasLoadedNamespace: i18n.languages were undefined or empty",this.languages),!1;var lng=this.languages[0],fallbackLng=this.options?this.options.fallbackLng:!1,lastLng=this.languages[this.languages.length-1];return lng.toLowerCase()==="cimode"?!0:(loadNotPending=function(l,n){var loadState=_this6.services.backendConnector.state["".concat(l,"|").concat(n)];return loadState===-1||loadState===2},options.precheck&&(preResult=options.precheck(this,loadNotPending),preResult!==undefined))?preResult:this.hasResourceBundle(lng,ns)?!0:this.services.backendConnector.backend?loadNotPending(lng,ns)&&(!fallbackLng||loadNotPending(lastLng,ns))?!0:!1:!0}},{key:"loadNamespaces",value:function(ns,callback){var _this7=this,deferred=defer();return this.options.ns?(typeof ns=="string"&&(ns=[ns]),ns.forEach(function(n){_this7.options.ns.indexOf(n)<0&&_this7.options.ns.push(n)}),this.loadResources(function(err){deferred.resolve();callback&&callback(err)}),deferred):(callback&&callback(),Promise.resolve())}},{key:"loadLanguages",value:function(lngs,callback){var deferred=defer(),preloaded,newLngs;return(typeof lngs=="string"&&(lngs=[lngs]),preloaded=this.options.preload||[],newLngs=lngs.filter(function(lng){return preloaded.indexOf(lng)<0}),!newLngs.length)?(callback&&callback(),Promise.resolve()):(this.options.preload=preloaded.concat(newLngs),this.loadResources(function(err){deferred.resolve();callback&&callback(err)}),deferred)}},{key:"dir",value:function(lng){if(lng||(lng=this.languages&&this.languages.length>0?this.languages[0]:this.language),!lng)return"rtl";return["ar","shu","sqr","ssh","xaa","yhd","yud","aao","abh","abv","acm","acq","acw","acx","acy","adf","ads","aeb","aec","afb","ajp","apc","apd","arb","arq","ars","ary","arz","auz","avl","ayh","ayl","ayn","ayp","bbz","pga","he","iw","ps","pbt","pbu","pst","prp","prd","ug","ur","ydd","yds","yih","ji","yi","hbo","men","xmn","fa","jpr","peo","pes","prs","dv","sam"].indexOf(this.services.languageUtils.getLanguagePartFromCode(lng))>=0?"rtl":"ltr"}},{key:"createInstance",value:function(){var options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},callback=arguments.length>1?arguments[1]:undefined;return new I18n(options,callback)}},{key:"cloneInstance",value:function(){var _this8=this,options=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{},callback=arguments.length>1&&arguments[1]!==undefined?arguments[1]:noop,mergedOptions=_objectSpread({},this.options,options,{isClone:!0}),clone=new I18n(mergedOptions);["store","services","language"].forEach(function(m){clone[m]=_this8[m]});clone.services=_objectSpread({},this.services);clone.services.utils={hasLoadedNamespace:clone.hasLoadedNamespace.bind(clone)};clone.translator=new Translator(clone.services,clone.options);clone.translator.on("*",function(event){for(var _len4=arguments.length,args=new Array(_len4>1?_len4-1:0),_key4=1;_key4<_len4;_key4++)args[_key4-1]=arguments[_key4];clone.emit.apply(clone,[event].concat(args))});return clone.init(mergedOptions,callback),clone.translator.options=clone.options,clone.translator.backendConnector.services.utils={hasLoadedNamespace:clone.hasLoadedNamespace.bind(clone)},clone}}]),I18n}(EventEmitter);return new I18n}),function(f){if(typeof exports=="object"&&typeof module!="undefined")module.exports=f();else if(typeof define=="function"&&define.amd)define([],f);else{var g;g=typeof window!="undefined"?window:typeof global!="undefined"?global:typeof self!="undefined"?self:this;g.i18nextHttpBackend=f()}}(function(){return function(){function r(e,n,t){function o(i,f){var c,a,p;if(!n[i]){if(!e[i]){if(c="function"==typeof require&&require,!f&&c)return c(i,!0);if(u)return u(i,!0);a=new Error("Cannot find module '"+i+"'");throw a.code="MODULE_NOT_FOUND",a;}p=n[i]={exports:{}};e[i][0].call(p.exports,function(r){var n=e[i][1][r];return o(n||r)},p,p.exports,r,e,n,t)}return n[i].exports}for(var u="function"==typeof require&&require,i=0;i<t.length;i++)o(t[i]);return o}return r}()({1:[function(require,module,exports){(function(global){(function(){var fetchApi,f;typeof fetch=="function"&&(typeof global!="undefined"&&global.fetch?fetchApi=global.fetch:typeof window!="undefined"&&window.fetch&&(fetchApi=window.fetch));typeof require!="undefined"&&(typeof window=="undefined"||typeof document=="undefined")&&(f=fetchApi||require("node-fetch"),f.default&&(f=f.default),exports.default=f,module.exports=exports.default)}).call(this)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"node-fetch":5}],2:[function(require,module,exports){"use strict";function _interopRequireDefault(obj){return obj&&obj.__esModule?obj:{"default":obj}}function _classCallCheck(instance,Constructor){if(!(instance instanceof Constructor))throw new TypeError("Cannot call a class as a function");}function _defineProperties(target,props){for(var descriptor,i=0;i<props.length;i++)descriptor=props[i],descriptor.enumerable=descriptor.enumerable||!1,descriptor.configurable=!0,"value"in descriptor&&(descriptor.writable=!0),Object.defineProperty(target,descriptor.key,descriptor)}function _createClass(Constructor,protoProps,staticProps){return protoProps&&_defineProperties(Constructor.prototype,protoProps),staticProps&&_defineProperties(Constructor,staticProps),Constructor}function _defineProperty(obj,key,value){return key in obj?Object.defineProperty(obj,key,{value:value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var _utils,_request,getDefaults,Backend,_default;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;_utils=require("./utils.js");_request=_interopRequireDefault(require("./request.js"));getDefaults=function(){return{loadPath:"/locales/{{lng}}/{{ns}}.json",addPath:"/locales/add/{{lng}}/{{ns}}",allowMultiLoading:!1,parse:function(data){return JSON.parse(data)},stringify:JSON.stringify,parsePayload:function(namespace,key,fallbackValue){return _defineProperty({},key,fallbackValue||"")},request:_request.default,reloadInterval:typeof window!="undefined"?!1:36e5,customHeaders:{},queryStringParams:{},crossDomain:!1,withCredentials:!1,overrideMimeType:!1,requestOptions:{mode:"cors",credentials:"same-origin",cache:"default"}}};Backend=function(){function Backend(services){var options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},allOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};_classCallCheck(this,Backend);this.services=services;this.options=options;this.allOptions=allOptions;this.type="backend";this.init(services,options,allOptions)}return _createClass(Backend,[{key:"init",value:function(services){var _this=this,options=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{},allOptions=arguments.length>2&&arguments[2]!==undefined?arguments[2]:{};this.services=services;this.options=_utils.defaults(options,this.options||{},getDefaults());this.allOptions=allOptions;this.services&&this.options.reloadInterval&&setInterval(function(){return _this.reload()},this.options.reloadInterval)}},{key:"readMulti",value:function(languages,namespaces,callback){var loadPath=this.options.loadPath,url;typeof this.options.loadPath=="function"&&(loadPath=this.options.loadPath(languages,namespaces));url=this.services.interpolator.interpolate(loadPath,{lng:languages.join("+"),ns:namespaces.join("+")});this.loadUrl(url,callback,languages,namespaces)}},{key:"read",value:function(language,namespace,callback){var loadPath=this.options.loadPath,url;typeof this.options.loadPath=="function"&&(loadPath=this.options.loadPath([language],[namespace]));url=this.services.interpolator.interpolate(loadPath,{lng:language,ns:namespace});this.loadUrl(url,callback,language,namespace)}},{key:"loadUrl",value:function(url,callback,languages,namespaces){var _this2=this;this.options.request(this.options,url,undefined,function(err,res){if(res&&(res.status>=500&&res.status<600||!res.status))return callback("failed loading "+url+"; status code: "+res.status,!0);if(res&&res.status>=400&&res.status<500)return callback("failed loading "+url+"; status code: "+res.status,!1);if(!res&&err&&err.message&&err.message.indexOf("Failed to fetch")>-1)return callback("failed loading "+url+": "+err.message,!0);if(err)return callback(err,!1);var ret,parseErr;try{ret=typeof res.data=="string"?_this2.options.parse(res.data,languages,namespaces):res.data}catch(e){parseErr="failed parsing "+url+" to json"}if(parseErr)return callback(parseErr,!1);callback(null,ret)})}},{key:"create",value:function(languages,namespace,key,fallbackValue,callback){var _this3=this;if(this.options.addPath){typeof languages=="string"&&(languages=[languages]);var payload=this.options.parsePayload(namespace,key,fallbackValue),finished=0,dataArray=[],resArray=[];languages.forEach(function(lng){var addPath=_this3.options.addPath,url;typeof _this3.options.addPath=="function"&&(addPath=_this3.options.addPath(lng,namespace));url=_this3.services.interpolator.interpolate(addPath,{lng:lng,ns:namespace});_this3.options.request(_this3.options,url,payload,function(data,res){finished+=1;dataArray.push(data);resArray.push(res);finished===languages.length&&callback&&callback(dataArray,resArray)})})}}},{key:"reload",value:function(){var _this4=this,_this$services=this.services,backendConnector=_this$services.backendConnector,languageUtils=_this$services.languageUtils,logger=_this$services.logger,currentLanguage=backendConnector.language,toLoad,append;currentLanguage&&currentLanguage.toLowerCase()==="cimode"||(toLoad=[],append=function(lng){var lngs=languageUtils.toResolveHierarchy(lng);lngs.forEach(function(l){toLoad.indexOf(l)<0&&toLoad.push(l)})},append(currentLanguage),this.allOptions.preload&&this.allOptions.preload.forEach(function(l){return append(l)}),toLoad.forEach(function(lng){_this4.allOptions.ns.forEach(function(ns){backendConnector.read(lng,ns,"read",null,null,function(err,data){err&&logger.warn("loading namespace ".concat(ns," for language ").concat(lng," failed"),err);!err&&data&&logger.log("loaded namespace ".concat(ns," for language ").concat(lng),data);backendConnector.loaded("".concat(lng,"|").concat(ns),err,data)})})}))}}]),Backend}();Backend.type="backend";_default=Backend;exports.default=_default;module.exports=exports.default},{"./request.js":3,"./utils.js":4}],3:[function(require,module,exports){(function(global){(function(){"use strict";function _getRequireWildcardCache(){if(typeof WeakMap!="function")return null;var cache=new WeakMap;return _getRequireWildcardCache=function(){return cache},cache}function _interopRequireWildcard(obj){var cache,newObj,hasPropertyDescriptor,key,desc;if(obj&&obj.__esModule)return obj;if(obj===null||_typeof(obj)!=="object"&&typeof obj!="function")return{"default":obj};if(cache=_getRequireWildcardCache(),cache&&cache.has(obj))return cache.get(obj);newObj={};hasPropertyDescriptor=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(key in obj)Object.prototype.hasOwnProperty.call(obj,key)&&(desc=hasPropertyDescriptor?Object.getOwnPropertyDescriptor(obj,key):null,desc&&(desc.get||desc.set)?Object.defineProperty(newObj,key,desc):newObj[key]=obj[key]);return newObj.default=obj,cache&&cache.set(obj,newObj),newObj}function _typeof(obj){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol=="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}var _utils,fetchNode,fetchApi,XmlHttpRequestApi,ActiveXObjectApi;Object.defineProperty(exports,"__esModule",{value:!0});exports.default=void 0;_utils=require("./utils.js");fetchNode=_interopRequireWildcard(require("./getFetch.js"));typeof fetch=="function"&&(typeof global!="undefined"&&global.fetch?fetchApi=global.fetch:typeof window!="undefined"&&window.fetch&&(fetchApi=window.fetch));_utils.hasXMLHttpRequest&&(typeof global!="undefined"&&global.XMLHttpRequest?XmlHttpRequestApi=global.XMLHttpRequest:typeof window!="undefined"&&window.XMLHttpRequest&&(XmlHttpRequestApi=window.XMLHttpRequest));typeof ActiveXObject=="function"&&(typeof global!="undefined"&&global.ActiveXObject?ActiveXObjectApi=global.ActiveXObject:typeof window!="undefined"&&window.ActiveXObject&&(ActiveXObjectApi=window.ActiveXObject));fetchApi||!fetchNode||XmlHttpRequestApi||ActiveXObjectApi||(fetchApi=fetchNode.default||fetchNode);typeof fetchApi!="function"&&(fetchApi=undefined);var addQueryString=function(url,params){var queryString,paramName;if(params&&_typeof(params)==="object"){queryString="";for(paramName in params)queryString+="&"+encodeURIComponent(paramName)+"="+encodeURIComponent(params[paramName]);if(!queryString)return url;url=url+(url.indexOf("?")!==-1?"&":"?")+queryString.slice(1)}return url},requestWithFetch=function(options,url,payload,callback){options.queryStringParams&&(url=addQueryString(url,options.queryStringParams));var headers=_utils.defaults({},typeof options.customHeaders=="function"?options.customHeaders():options.customHeaders);payload&&(headers["Content-Type"]="application/json");fetchApi(url,_utils.defaults({method:payload?"POST":"GET",body:payload?options.stringify(payload):undefined,headers:headers},typeof options.requestOptions=="function"?options.requestOptions(payload):options.requestOptions)).then(function(response){if(!response.ok)return callback(response.statusText||"Error",{status:response.status});response.text().then(function(data){callback(null,{status:response.status,data:data})}).catch(callback)}).catch(callback)},requestWithXmlHttpRequest=function(options,url,payload,callback){var x,h,i;payload&&_typeof(payload)==="object"&&(payload=addQueryString("",payload).slice(1));options.queryStringParams&&(url=addQueryString(url,options.queryStringParams));try{if(x=XmlHttpRequestApi?new XmlHttpRequestApi:new ActiveXObjectApi("MSXML2.XMLHTTP.3.0"),x.open(payload?"POST":"GET",url,1),options.crossDomain||x.setRequestHeader("X-Requested-With","XMLHttpRequest"),x.withCredentials=!!options.withCredentials,payload&&x.setRequestHeader("Content-Type","application/x-www-form-urlencoded"),x.overrideMimeType&&x.overrideMimeType("application/json"),h=options.customHeaders,h=typeof h=="function"?h():h,h)for(i in h)x.setRequestHeader(i,h[i]);x.onreadystatechange=function(){x.readyState>3&&callback(x.status>=400?x.statusText:null,{status:x.status,data:x.responseText})};x.send(payload)}catch(e){console&&console.log(e)}},request=function(options,url,payload,callback){return(typeof payload=="function"&&(callback=payload,payload=undefined),callback=callback||function(){},fetchApi)?requestWithFetch(options,url,payload,callback):_utils.hasXMLHttpRequest||typeof ActiveXObject=="function"?requestWithXmlHttpRequest(options,url,payload,callback):void 0},_default=request;exports.default=_default;module.exports=exports.default}).call(this)}).call(this,typeof global!="undefined"?global:typeof self!="undefined"?self:typeof window!="undefined"?window:{})},{"./getFetch.js":1,"./utils.js":4}],4:[function(require,module,exports){"use strict";function _typeof(obj){"@babel/helpers - typeof";return _typeof=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(obj){return typeof obj}:function(obj){return obj&&typeof Symbol=="function"&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function defaults(obj){return each.call(slice.call(arguments,1),function(source){if(source)for(var prop in source)obj[prop]===undefined&&(obj[prop]=source[prop])}),obj}function hasXMLHttpRequest(){return typeof XMLHttpRequest=="function"||(typeof XMLHttpRequest=="undefined"?"undefined":_typeof(XMLHttpRequest))==="object"}Object.defineProperty(exports,"__esModule",{value:!0});exports.defaults=defaults;exports.hasXMLHttpRequest=hasXMLHttpRequest;var arr=[],each=arr.forEach,slice=arr.slice},{}],5:[function(){},{}]},{},[2])(2)});!function(n,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(n=n||self).i18nextChainedBackend=e()}(this,function(){"use strict";function n(n,e){for(var i,t=0;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(n,i.key,i)}var e=[],t=e.forEach,i=e.slice,a=function(){function e(n){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function");}(this,e);this.backends=[];this.type="backend";this.init(n,t)}var a,o,c;return a=e,(o=[{key:"init",value:function(n){var e=this,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=arguments.length>2?arguments[2]:void 0;this.services=n;this.options=function(n){return t.call(i.call(arguments,1),function(e){if(e)for(var t in e)void 0===n[t]&&(n[t]=e[t])}),n}(a,this.options||{},{});this.options.backends&&this.options.backends.forEach(function(t,i){var a;e.backends[i]=e.backends[i]||((a=t)?"function"==typeof a?new a:a:null);e.backends[i].init(n,e.options.backendOptions[i],o)})}},{key:"read",value:function(n,e,t){var i=this,a=this.backends.length,o=function t(a,o){if(!(a<0)){var c=i.backends[a];c.save?(c.save(n,e,o),t(a-1,o)):t(a-1,o)}};!function c(r){if(r>=a)return t(new Error("non of the backend loaded data;",!0));var s=i.backends[r];s.read?s.read(n,e,function(n,e){!n&&e&&Object.keys(e).length>-1?(t(null,e,r),o(r-1,e)):c(r+1)}):c(r+1)}(0)}},{key:"create",value:function(n,e,t,i){this.backends.forEach(function(a){a.create&&a.create(n,e,t,i)})}}])&&n(a.prototype,o),c&&n(a,c),e}();return a.type="backend",a});!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define(t):(e=e||self).i18nextLocalStorageBackend=t()}(this,function(){"use strict";function e(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function t(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function");}function n(e,t){for(var i,n=0;n<t.length;n++)i=t[n],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}function i(e,t,i){return t&&n(e.prototype,t),i&&n(e,i),e}var o=function(){function e(n){t(this,e);this.store=n.store}return i(e,[{key:"setItem",value:function(e,t){if(this.store)try{this.store.setItem(e,t)}catch(e){}}},{key:"getItem",value:function(e,t){if(this.store)try{return this.store.getItem(e,t)}catch(e){}}}]),e}(),r=function(){function n(e){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};t(this,n);this.init(e,i);this.type="backend"}return i(n,[{key:"init",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.services=t;this.options=function(t){for(var i,o,n=1;n<arguments.length;n++)i=null!=arguments[n]?arguments[n]:{},o=Object.keys(i),"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(i).filter(function(e){return Object.getOwnPropertyDescriptor(i,e).enumerable}))),o.forEach(function(n){e(t,n,i[n])});return t}({},{prefix:"i18next_res_",expirationTime:6048e5,defaultVersion:void 0,versions:{},store:window.localStorage},this.options,n);this.storage=new o(this.options)}},{key:"read",value:function(e,t,n){var i=(new Date).getTime(),o,r;return this.storage.store?(o=this.storage.getItem("".concat(this.options.prefix).concat(e,"-").concat(t)),o&&(o=JSON.parse(o),r=this.getVersion(e),o.i18nStamp&&o.i18nStamp+this.options.expirationTime>i&&r===o.i18nVersion))?(delete o.i18nVersion,delete o.i18nStamp,n(null,o)):n(null,null):n(null,null)}},{key:"save",value:function(e,t,n){if(this.storage.store){n.i18nStamp=(new Date).getTime();var i=this.getVersion(e);i&&(n.i18nVersion=i);this.storage.setItem("".concat(this.options.prefix).concat(e,"-").concat(t),JSON.stringify(n))}}},{key:"getVersion",value:function(e){return this.options.versions[e]||this.options.defaultVersion}}]),n}();return r.type="backend",r});