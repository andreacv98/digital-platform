(function(n,t,i){"use strict";var e={version:"2.1",tipLocation:"bottom",nubPosition:"auto",scroll:!0,scrollSpeed:300,timer:0,autoStart:!1,startTimerOnClick:!0,startOffset:0,nextButton:!0,prevButton:!0,tipAnimation:"fade",pauseAfter:[],tipAnimationFadeSpeed:300,cookieMonster:!1,cookieName:"joyride",cookieDomain:!1,cookiePath:!1,localStorage:!1,localStorageKey:"joyride",tipContainer:"body",modal:!1,expose:!1,postExposeCallback:n.noop,preRideCallback:n.noop,postRideCallback:n.noop,preStepCallback:n.noop,postStepCallback:n.noop,template:{link:"",timer:'<div class="joyride-timer-indicator-wrap"><span class="joyride-timer-indicator"><\/span><\/div>',tip:'<div class="joyride-tip-guide"><span class="joyride-nub"><\/span><\/div>',wrapper:'<div class="joyride-content-wrapper" role="dialog"><div class="modal-header"><a href="#close" class="close joyride-close-tip" id="idTastoXJoyRide">&times;<\/a><h4 class="modal-title" data-lang="ScopriComeUsareIlPortale">Scopri come usare il portale<span>&nbsp;<\/span><i class="fa fa-binoculars"><\/i> <\/h4><\/div><\/div>',wrapperForButtons:'<div class="joyride_buttons_wrap" />',prevButton:'<a href="#" class="joyride-prev-tip joyride_button_custom"><\/a>',nextButton:'<a href="#" class="joyride-next-tip joyride_button_custom"><\/a>',modal:'<div class="joyride-modal-bg"><\/div>',expose:'<div class="joyride-expose-wrapper"><\/div>',exposeCover:'<div class="joyride-expose-cover"><\/div>'}},f=f||!1,r={},u={init:function(i){return this.each(function(){if(n.isEmptyObject(r)){r=n.extend(!0,e,i);r.document=t.document;r.$document=n(r.document);r.$window=n(t);r.$content_el=n(this);r.$body=n(r.tipContainer);r.body_offset=n(r.tipContainer).position();r.$tip_content=n("> li",r.$content_el);r.paused=!1;r.attempts=0;r.tipLocationPatterns={top:["bottom"],bottom:[],left:["right","top","bottom"],right:["left","top","bottom"]};u.jquery_check();n.isFunction(n.cookie)||(r.cookieMonster=!1);r.cookieMonster&&n.cookie(r.cookieName)||r.localStorage&&u.support_localstorage()&&localStorage.getItem(r.localStorageKey)||(r.$tip_content.each(function(t){u.create({$li:n(this),index:t})}),r.autoStart&&(!r.startTimerOnClick&&r.timer>0?(u.show("init"),u.startTimer()):u.show("init")));r.$document.on("click.joyride",".joyride-next-tip, .joyride-modal-bg",function(n){n.preventDefault();r.$li.next().length<1?u.end():r.timer>0?(clearTimeout(r.automate),u.hide(),u.show(),u.startTimer()):(u.hide(),u.show())});r.$document.on("click.joyride",".joyride-prev-tip",function(n){n.preventDefault();r.$li.prev().length<1?u.end():r.timer>0?(clearTimeout(r.automate),u.hide(),u.show(),u.startTimer()):(u.hide(),u.show(!1,!0))});r.$document.on("click.joyride",".joyride-close-tip",function(n){n.preventDefault();u.end(!0)});r.$window.bind("resize.joyride",function(){if(r.$li){if(r.exposed&&r.exposed.length>0){var t=n(r.exposed);t.each(function(){var t=n(this);u.un_expose(t);u.expose(t)})}u.is_phone()?u.pos_phone():u.pos_default()}})}else u.restart()})},resume:function(){u.set_li();u.show()},nextTip:function(){r.$li.next().length<1?u.end():r.timer>0?(clearTimeout(r.automate),u.hide(),u.show(),u.startTimer()):(u.hide(),u.show())},tip_template:function(t){var i,e,f;return t.tip_class=t.tip_class||"",i=n(r.template.tip).addClass(t.tip_class),e=n.trim(n(t.li).html())+u.prev_button_text(t.next_button_text,t.index)+u.next_button_text(t.prev_button_text)+r.template.link+u.timer_instance(t.index),f=n(r.template.wrapper),t.li.attr("data-aria-labelledby")&&f.attr("aria-labelledby",t.li.attr("data-aria-labelledby")),t.li.attr("data-aria-describedby")&&f.attr("aria-describedby",t.li.attr("data-aria-describedby")),i.append(f),i.first().attr("data-index",t.index),n(".joyride-content-wrapper",i).append(e),i[0]},timer_instance:function(t){return t===0&&r.startTimerOnClick&&r.timer>0||r.timer===0?"":u.outerHTML(n(r.template.timer)[0])},next_button_text:function(t){return r.nextButton?(t=n.trim(t)||"Avanti",t=u.outerHTML(n(r.template.nextButton).append(t)[0])):t="",t},prev_button_text:function(t,i){return r.prevButton&&i>0?(t=n.trim(t)||"Indietro",t=u.outerHTML(n(r.template.prevButton).append(t)[0])):t="",t},create:function(t){var f=t.$li.attr("data-next-button")||t.$li.attr("data-button")||t.$li.attr("data-text"),o=t.$li.attr("data-prev-button"),s=t.$li.attr("class"),i=n(u.tip_template({tip_class:s,index:t.index,next_button_text:f,prev_button_text:o,li:t.$li}));e.template.wrapperForButtons&&n(".joyride_button_custom",i).wrapAll(e.template.wrapperForButtons);n(r.tipContainer).append(i)},show:function(t,f){var c={},o,h=[],l=0,s,e=null;if(r.$li===i||n.inArray(r.$li.index(),r.pauseAfter)===-1)if(r.paused?r.paused=!1:u.set_li(t,f),r.attempts=0,r.$li.length&&r.$target.length>0){for(t&&(r.preRideCallback(r.$li.index(),r.$next_tip),r.modal&&u.show_modal()),r.preStepCallback(r.$li.index(),r.$next_tip),h=(r.$li.data("options")||":").split(";"),l=h.length,o=l-1;o>=0;o--)s=h[o].split(":"),s.length===2&&(c[n.trim(s[0])]=n.trim(s[1]));r.tipSettings=n.extend({},r,c);r.tipSettings.tipLocationPattern=r.tipLocationPatterns[r.tipSettings.tipLocation];r.modal&&r.expose&&u.expose();!/body/i.test(r.$target.selector)&&r.scroll&&u.scroll_to();u.is_phone()?u.pos_phone(!0):u.pos_default(!0);e=n(".joyride-timer-indicator",r.$next_tip);/pop/i.test(r.tipAnimation)?(e.outerWidth(0),r.timer>0?(r.$next_tip.show(),e.animate({width:n(".joyride-timer-indicator-wrap",r.$next_tip).outerWidth()},r.timer)):r.$next_tip.show()):/fade/i.test(r.tipAnimation)&&(e.outerWidth(0),r.timer>0?(r.$next_tip.fadeIn(r.tipAnimationFadeSpeed),r.$next_tip.show(),e.animate({width:n(".joyride-timer-indicator-wrap",r.$next_tip).outerWidth()},r.timer)):r.$next_tip.fadeIn(r.tipAnimationFadeSpeed));r.$current_tip=r.$next_tip;n(".joyride-next-tip",r.$current_tip).focus();u.tabbable(r.$current_tip)}else r.$li&&r.$target.length<1?u.show():u.end();else r.paused=!0},is_phone:function(){return f?f.mq("only screen and (max-width: 767px)"):r.$window.width()<767?!0:!1},support_localstorage:function(){return f?f.localstorage:!!t.localStorage},hide:function(){r.modal&&r.expose&&u.un_expose();r.modal||n(".joyride-modal-bg").hide();r.$current_tip.hide();r.postStepCallback(r.$li.index(),r.$current_tip)},set_li:function(n,t){n?(r.$li=r.$tip_content.eq(r.startOffset),u.set_next_tip(),r.$current_tip=r.$next_tip):(r.$li=t?r.$li.prev():r.$li.next(),u.set_next_tip());u.set_target()},set_next_tip:function(){r.$next_tip=n(".joyride-tip-guide[data-index="+r.$li.index()+"]")},set_target:function(){var t=r.$li.attr("data-class"),i=r.$li.attr("data-id"),u=function(){return i?n(r.document.getElementById(i)):t?n("."+t).filter(":visible").first():n("body")};r.$target=u()},scroll_to:function(){var t,i;t=r.$window.height()/2;i=Math.ceil(r.$target.offset().top-t+r.$next_tip.outerHeight());n("html, body").stop().animate({scrollTop:i},r.scrollSpeed)},paused:function(){return n.inArray(r.$li.index()+1,r.pauseAfter)===-1?!0:!1},destroy:function(){n.isEmptyObject(r)||r.$document.off(".joyride");n(t).off(".joyride");n(".joyride-close-tip, .joyride-next-tip, .joyride-modal-bg").off(".joyride");n(".joyride-tip-guide, .joyride-modal-bg").remove();clearTimeout(r.automate);r={}},restart:function(){r.autoStart?(u.hide(),r.$li=i,u.show("init")):(!r.startTimerOnClick&&r.timer>0?(u.show("init"),u.startTimer()):u.show("init"),r.autoStart=!0)},pos_default:function(t){var c=Math.ceil(r.$window.height()/2),l=r.$next_tip.offset(),i=n(".joyride-nub",r.$next_tip),o=Math.ceil(i.outerWidth()/2),s=Math.ceil(i.outerHeight()/2),h=t||!1,f,e;h&&(r.$next_tip.css("visibility","hidden"),r.$next_tip.show());/body/i.test(r.$target.selector)?r.$li.length&&u.pos_modal(i):(f=r.tipSettings.tipAdjustmentY?parseInt(r.tipSettings.tipAdjustmentY):0,e=r.tipSettings.tipAdjustmentX?parseInt(r.tipSettings.tipAdjustmentX):0,u.bottom()?(r.$next_tip.css({top:r.$target.offset().top+s+r.$target.outerHeight()+f+30,left:r.$target.offset().left+e}),/right/i.test(r.tipSettings.nubPosition)&&r.$next_tip.css("left",r.$target.offset().left-r.$next_tip.outerWidth()+r.$target.outerWidth()),u.nub_position(i,r.tipSettings.nubPosition,"top")):u.top()?(r.$next_tip.css({top:r.$target.offset().top-r.$next_tip.outerHeight()-s+f-30,left:r.$target.offset().left+e}),u.nub_position(i,r.tipSettings.nubPosition,"bottom")):u.right()?(r.$next_tip.css({top:r.$target.offset().top+f,left:r.$target.outerWidth()+r.$target.offset().left+o+e+30}),u.nub_position(i,r.tipSettings.nubPosition,"left")):u.left()&&(r.$next_tip.css({top:r.$target.offset().top+f,left:r.$target.offset().left-r.$next_tip.outerWidth()-o+e-30}),u.nub_position(i,r.tipSettings.nubPosition,"right")),!u.visible(u.corners(r.$next_tip))&&r.attempts<r.tipSettings.tipLocationPattern.length&&(i.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left"),r.tipSettings.tipLocation=r.tipSettings.tipLocationPattern[r.attempts],r.attempts++,u.pos_default(!0)));h&&(r.$next_tip.hide(),r.$next_tip.css("visibility","visible"))},pos_phone:function(t){var o=r.$next_tip.outerHeight(),h=r.$next_tip.offset(),s=r.$target.outerHeight(),i=n(".joyride-nub",r.$next_tip),f=Math.ceil(i.outerHeight()/2),e=t||!1;i.removeClass("bottom").removeClass("top").removeClass("right").removeClass("left");e&&(r.$next_tip.css("visibility","hidden"),r.$next_tip.show());/body/i.test(r.$target.selector)?r.$li.length&&u.pos_modal(i):u.top()?(r.$next_tip.offset({top:r.$target.offset().top-o-f}),i.addClass("bottom")):(r.$next_tip.offset({top:r.$target.offset().top+s+f}),i.addClass("top"));e&&(r.$next_tip.hide(),r.$next_tip.css("visibility","visible"))},pos_modal:function(n){u.center();n.hide();u.show_modal()},show_modal:function(){n(".joyride-modal-bg").length<1&&n("body").append(r.template.modal).show();/pop/i.test(r.tipAnimation)?n(".joyride-modal-bg").show():n(".joyride-modal-bg").fadeIn(r.tipAnimationFadeSpeed)},expose:function(){var f,e,i,o,s="expose-"+Math.floor(Math.random()*1e4);if(arguments.length>0&&arguments[0]instanceof n)i=arguments[0];else if(r.$target&&!/body/i.test(r.$target.selector))i=r.$target;else return!1;if(i.length<1)return t.console&&console.error("element not valid",i),!1;f=n(r.template.expose);r.$body.append(f);f.css({top:i.offset().top,left:i.offset().left,width:i.outerWidth(!0),height:i.outerHeight(!0)});e=n(r.template.exposeCover);o=i.data("expose-css")==null?{zIndex:i.css("z-index"),position:i.css("position")}:i.data("expose-css");i.css("z-index",f.css("z-index")*1+1);o.position=="static"&&i.css("position","relative");i.data("expose-css",o);e.css({top:i.offset().top,left:i.offset().left,width:i.outerWidth(!0),height:i.outerHeight(!0)});r.$body.append(e);f.addClass(s);e.addClass(s);r.tipSettings.exposeClass&&(f.addClass(r.tipSettings.exposeClass),e.addClass(r.tipSettings.exposeClass));i.data("expose",s);r.postExposeCallback(r.$li.index(),r.$next_tip,i);u.add_exposed(i)},un_expose:function(){var e,i,o,f,s=!1;if(arguments.length>0&&arguments[0]instanceof n)i=arguments[0];else if(r.$target&&!/body/i.test(r.$target.selector))i=r.$target;else return!1;if(i.length<1)return t.console&&console.error("element not valid",i),!1;e=i.data("expose");o=n("."+e);arguments.length>1&&(s=arguments[1]);s===!0?n(".joyride-expose-wrapper,.joyride-expose-cover").remove():o.remove();f=i.data("expose-css");f.zIndex=="auto"?i.css("z-index",""):i.css("z-index",f.zIndex);f.position!=i.css("position")&&(f.position=="static"?i.css("position",""):i.css("position",f.position));i.removeData("expose");i.removeData("expose-z-index");u.remove_exposed(i)},add_exposed:function(t){r.exposed=r.exposed||[];t instanceof n?r.exposed.push(t[0]):typeof t=="string"&&r.exposed.push(t)},remove_exposed:function(t){var u,i;for(t instanceof n?u=t[0]:typeof t=="string"&&(u=t),r.exposed=r.exposed||[],i=0;i<r.exposed.length;i++)if(r.exposed[i]==u){r.exposed.splice(i,1);return}},center:function(){var n=r.$window;return r.$next_tip.css({top:(n.height()-r.$next_tip.outerHeight())/2+n.scrollTop(),left:(n.width()-r.$next_tip.outerWidth())/2+n.scrollLeft()}),!0},bottom:function(){return/bottom/i.test(r.tipSettings.tipLocation)},top:function(){return/top/i.test(r.tipSettings.tipLocation)},right:function(){return/right/i.test(r.tipSettings.tipLocation)},left:function(){return/left/i.test(r.tipSettings.tipLocation)},corners:function(n){var t=r.$window,o=t.height()/2,i=Math.ceil(r.$target.offset().top-o+r.$next_tip.outerHeight()),s=t.width()+t.scrollLeft(),e=t.height()+i,u=t.height()+t.scrollTop(),f=t.scrollTop();return i<f&&(f=i<0?0:i),e>u&&(u=e),[n.offset().top<f,s<n.offset().left+n.outerWidth(),u<n.offset().top+n.outerHeight(),t.scrollLeft()>n.offset().left]},visible:function(n){for(var t=n.length;t--;)if(n[t])return!1;return!0},nub_position:function(n,t,i){t==="auto"?n.addClass(i):n.addClass(t)},startTimer:function(){r.$li.length?r.automate=setTimeout(function(){u.hide();u.show();u.startTimer()},r.timer):clearTimeout(r.automate)},end:function(t){t=t||!1;t&&r.$window.unbind("resize.joyride");r.cookieMonster&&n.cookie(r.cookieName,"ridden",{expires:365,domain:r.cookieDomain,path:r.cookiePath});r.localStorage&&localStorage.setItem(r.localStorageKey,!0);r.timer>0&&clearTimeout(r.automate);r.modal&&r.expose&&u.un_expose();r.$current_tip&&r.$current_tip.hide();r.$li&&(r.postStepCallback(r.$li.index(),r.$current_tip,t),r.postRideCallback(r.$li.index(),r.$current_tip,t));n(".joyride-modal-bg").hide()},jquery_check:function(){return n.isFunction(n.fn.on)?!0:(n.fn.on=function(n,t,i){return this.delegate(t,n,i)},n.fn.off=function(n,t,i){return this.undelegate(t,n,i)},!1)},outerHTML:function(n){return n.outerHTML||(new XMLSerializer).serializeToString(n)},version:function(){return r.version},tabbable:function(t){n(t).on("keydown",function(i){if(!i.isDefaultPrevented()&&i.keyCode&&i.keyCode===27){i.preventDefault();u.end(!0);return}if(i.keyCode===9){var r=n(t).find(":tabbable"),f=r.filter(":first"),e=r.filter(":last");i.target!==e[0]||i.shiftKey?i.target===f[0]&&i.shiftKey&&(e.focus(1),i.preventDefault()):(f.focus(1),i.preventDefault())}})}};n.fn.joyride=function(t){if(u[t])return u[t].apply(this,Array.prototype.slice.call(arguments,1));if(typeof t!="object"&&t)n.error("Method "+t+" does not exist on jQuery.joyride");else return u.init.apply(this,arguments)}})(jQuery,this);